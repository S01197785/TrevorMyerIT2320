<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>	
// 16 notes    
var scale = ["C", "D", "E", "F", "G", "A5", "B5", "C5", "C5",  "B5",  "A5",  "G",  "F",  "E",  "D",  "C" ];
var output = " ";
var wait = true;

function playSong() {
      //audios = document.getElementById("C");
      //audios.play();   
      
      output = " "
      for (i = 0; i < scale.length; i++) {
         output += scale[i] + " ";
         notes.innerHTML = output;
         audios = document.getElementById(scale[i]);
         audios.play();   
        }    
}


async function playSongWithDelay() {
         if (scale.length > 0) {  output += scale[0] + " "; };
         notes.innerHTML = output;
         audios = document.getElementById(scale[0]);
         audios.addEventListener("ended", function() { 
            if (scale.length > 0) {  
               // console.log("inside continue ... scale size is " + scale.length);
               scale.splice(0, 1);       // remove index 0 ... shorten the array
               playSongWithDelay();      // call yourself for the new note
               //return;
            };               
         });
         audios.play();   
    }    

</script>
</head>

<body>
<h2>Lab 13 - Async & Await</h2>
<button type="button" onclick="playSong()">Play</button>
<button type="button" onclick="playSongWithDelay()">Play with delay</button>
<p><h1><span id="notes"></span></h1></p>

<!-- from freesounds.org - user: pinkyfinger -->
<!-- 
   <audio id="A">  
     <source src="sounds/68437__pinkyfinger__piano-a.wav" type="audio/wav">
     Your browser does not support the audio element.
   </audio>

<audio id="Bb">
  <source src="sounds/68439__pinkyfinger__piano-bb.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="Csharp">
  <source src="sounds/68440__pinkyfinger__piano-c-sharp.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="Eb">
  <source src="sounds/68444__pinkyfinger__piano-eb.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="Fsharp">
  <source src="sounds/68445__pinkyfinger__piano-f-sharp.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="Gsharp">
  <source src="sounds/68447__pinkyfinger__piano-g-sharp.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="Gsharp5">
  <source src="sounds/68447__pinkyfinger__piano-g-sharp5.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>


-->
<audio id="B">
  <source src="sounds/68438__pinkyfinger__piano-b.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="C">
  <source src="sounds/68441__pinkyfinger__piano-c.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="D">
  <source src="sounds/68442__pinkyfinger__piano-d.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="E">
  <source src="sounds/68443__pinkyfinger__piano-e.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="F">
  <source src="sounds/68446__pinkyfinger__piano-f.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="G">
  <source src="sounds/68448__pinkyfinger__piano-g.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="A5">  
  <source src="sounds/68437__pinkyfinger__piano-a5.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="B5">
  <source src="sounds/68438__pinkyfinger__piano-b5.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

<audio id="C5">
  <source src="sounds/68441__pinkyfinger__piano-c5.wav" type="audio/wav">
  Your browser does not support the audio element.
</audio>

</body>
</html>
